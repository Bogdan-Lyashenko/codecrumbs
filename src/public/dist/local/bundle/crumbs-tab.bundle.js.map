{"version":3,"sources":["webpack://codecrumbs//Users/bliashenko/Learning/codecrumbs/node_modules/antd/es/_util/openAnimation.js","webpack://codecrumbs/./js/components/sideBar/component/Code/index.scss","webpack://codecrumbs/./js/components/sideBar/component/CrumbsTab/index.scss","webpack://codecrumbs/./js/components/sideBar/component/Code/index.js","webpack://codecrumbs/./js/components/sideBar/component/Code/index.scss?7735","webpack://codecrumbs/./js/components/sideBar/component/CrumbsTab/index.js","webpack://codecrumbs/./js/components/sideBar/component/CrumbsTab/index.scss?9b71"],"names":["FONT_SIZE","props","dependenciesLines","crumbedLines","codeRef","scrollTo","lines","length","prevProps","fixScroll","code","limitedHeight","classNames","el","atomOneLight","fontSize","lineNumber","isMatchLineNumber","className","React","Component","find","Panel","CrumbsTab","flowStepsFiles","Array","fill","map","item","index","stepFile","i","step","file","path","fileCode","crumbNodeLines","mapStateToProps","state","getSourceUserChoice","selectedNode","getSourceLayout","filesLayoutMap","getCodeCrumbsUserChoice","selectedCrumbedFlowKey","codeCrumbedFlowsMap","getFlowStepsFiles","sortedFlowSteps","currentFlow","Object","keys","forEach","filePath","steps","children","filter","data","params","flow","flowStep","concat","sort","a","b","connect"],"mappings":"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","file":"crumbs-tab.bundle.js","sourcesContent":["import cssAnimation from 'css-animation';\nimport raf from 'raf';\nfunction animate(node, show, done) {\n    var height = void 0;\n    var requestAnimationFrameId = void 0;\n    return cssAnimation(node, 'ant-motion-collapse', {\n        start: function start() {\n            if (!show) {\n                node.style.height = node.offsetHeight + 'px';\n                node.style.opacity = '1';\n            } else {\n                height = node.offsetHeight;\n                node.style.height = '0px';\n                node.style.opacity = '0';\n            }\n        },\n        active: function active() {\n            if (requestAnimationFrameId) {\n                raf.cancel(requestAnimationFrameId);\n            }\n            requestAnimationFrameId = raf(function () {\n                node.style.height = (show ? height : 0) + 'px';\n                node.style.opacity = show ? '1' : '0';\n            });\n        },\n        end: function end() {\n            if (requestAnimationFrameId) {\n                raf.cancel(requestAnimationFrameId);\n            }\n            node.style.height = '';\n            node.style.opacity = '';\n            done();\n        }\n    });\n}\nvar animation = {\n    enter: function enter(node, done) {\n        return animate(node, true, done);\n    },\n    leave: function leave(node, done) {\n        return animate(node, false, done);\n    },\n    appear: function appear(node, done) {\n        return animate(node, true, done);\n    }\n};\nexport default animation;","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".Code {\\n  height: 100%;\\n  position: relative;\\n  overflow: auto; }\\n  .Code .crumbedLine {\\n    display: block;\\n    background-color: rgba(255, 225, 244, 0.8); }\\n  .Code .importedDependencyLine {\\n    display: block;\\n    background-color: rgba(0, 148, 249, 0.1); }\\n  .Code.limitedHeight {\\n    max-height: 200px; }\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".CrumbsTab {\\n  height: 100%; }\\n  .CrumbsTab .ant-collapse {\\n    margin-left: -16px;\\n    margin-right: -16px;\\n    max-height: 100%;\\n    overflow: auto; }\\n\", \"\"]);\n\n// exports\n","import React from 'react';\nimport classNames from 'classnames';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { atomOneLight } from 'react-syntax-highlighter/styles/hljs';\n\nimport './index.scss';\n\nconst FONT_SIZE = '12px';\n//TODO: add select with several themes\n//TODO: scrool to/highlight crumbed lines\n//https://github.com/conorhastings/react-syntax-highlighter/blob/master/README.md\nexport default class extends React.Component {\n  fixScroll() {\n    const { dependenciesLines = [], crumbedLines = [] } = this.props;\n    if (!this.codeRef || !this.codeRef.scrollTo) {\n      return;\n    }\n\n    const lines = dependenciesLines.length\n      ? dependenciesLines\n      : crumbedLines.length\n        ? crumbedLines\n        : null;\n\n    lines && this.codeRef.scrollTo(0, lines[0][0] * 15 - 5);\n  }\n  componentDidUpdate(prevProps) {\n    this.fixScroll();\n  }\n  componentDidMount() {\n    this.fixScroll();\n  }\n\n  render() {\n    const { code, crumbedLines = [], dependenciesLines = [], limitedHeight } = this.props;\n\n    // TODO: calc height for .Code based on dependenciesLines - it's not always need to be 300 px!!\n    return (\n      <div className={classNames('Code', { limitedHeight })} ref={el => (this.codeRef = el)}>\n        <SyntaxHighlighter\n          language=\"javascript\"\n          style={atomOneLight}\n          showLineNumbers={true}\n          wrapLines={true}\n          customStyle={{ fontSize: FONT_SIZE }}\n          lineProps={lineNumber => {\n            if (isMatchLineNumber(crumbedLines, lineNumber)) {\n              return { className: 'crumbedLine' };\n            }\n\n            if (isMatchLineNumber(dependenciesLines, lineNumber)) {\n              return { className: 'importedDependencyLine' };\n            }\n\n            return {};\n          }}\n        >\n          {code}\n        </SyntaxHighlighter>\n      </div>\n    );\n  }\n}\n\nconst isMatchLineNumber = (lines, lineNumber) =>\n  !!lines.find(lines => {\n    if (lines[0] === lineNumber && lines[1] === lineNumber) {\n      return true;\n    }\n    return lines[0] <= lineNumber && lines[1] >= lineNumber;\n  });\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Collapse, Alert } from 'antd';\n\nimport {\n  getSourceLayout,\n  getSourceUserChoice,\n  getCodeCrumbsUserChoice\n} from 'core/dataBus/selectors';\n\nimport Code from '../Code';\nimport './index.scss';\n\nconst Panel = Collapse.Panel;\n\nconst CrumbsTab = props => {\n  const { flowStepsFiles } = props;\n\n  return (\n    <div className={'CrumbsTab'}>\n      {flowStepsFiles.length ? (\n        <Collapse\n          bordered={false}\n          defaultActiveKey={Array(flowStepsFiles.length)\n            .fill()\n            .map((item, index) => `${index}`)}\n        >\n          {flowStepsFiles.map((stepFile, i) => {\n            return (\n              <Panel\n                header={`[${typeof stepFile.step !== 'undefined' ? stepFile.step : '*'}] ${\n                  stepFile.file.path\n                }`}\n                key={i}\n              >\n                <Code\n                  limitedHeight={true}\n                  code={stepFile.file.fileCode || ''}\n                  crumbedLines={[stepFile.crumbNodeLines]}\n                />\n              </Panel>\n            );\n          })}\n        </Collapse>\n      ) : (\n        <Alert\n          message=\"C-mon, my dear friend, select crumbs trail, what are you waiting for?\"\n          type=\"info\"\n          showIcon\n        />\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state, props) => {\n  const { selectedNode } = getSourceUserChoice(state, props);\n  const { filesLayoutMap } = getSourceLayout(state, props);\n  const { selectedCrumbedFlowKey, codeCrumbedFlowsMap } = getCodeCrumbsUserChoice(state, props);\n\n  return {\n    selectedNode,\n    flowStepsFiles: getFlowStepsFiles(selectedCrumbedFlowKey, codeCrumbedFlowsMap, filesLayoutMap)\n  };\n};\n\nconst getFlowStepsFiles = (selectedCrumbedFlowKey, codeCrumbedFlowsMap, filesLayoutMap) => {\n  let sortedFlowSteps = [];\n  const currentFlow = codeCrumbedFlowsMap[selectedCrumbedFlowKey];\n\n  if (!currentFlow) {\n    return sortedFlowSteps;\n  }\n\n  Object.keys(currentFlow).forEach(filePath => {\n    const steps = ((filesLayoutMap[filePath] && filesLayoutMap[filePath].children) || [])\n      .filter(({ data }) => data.params.flow === selectedCrumbedFlowKey)\n      .map(({ data }) => ({\n        crumbNodeLines: data.crumbNodeLines,\n        file: filesLayoutMap[filePath].data,\n        step: data.params.flowStep\n      }));\n\n    sortedFlowSteps = sortedFlowSteps.concat(steps);\n  });\n\n  sortedFlowSteps.sort((a, b) => a.step - b.step);\n  return sortedFlowSteps;\n};\n\nexport default connect(mapStateToProps)(CrumbsTab);\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}